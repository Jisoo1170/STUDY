# [ 리눅스 기초 ]



## 디렉터리와 파일 사용하기

1. ### 파일의 종류와 특징

   파일의 종류에는 일반파일, 디렉터리, 심볼릭 링크, 장치 파일이 있다.

   - 일반 파일 : 데이터가 저장되는 파일이다.

   - 디렉터리 : 파일을 의미한다.

   - 심볼릭 링크 : 윈도우 바로가기와 비슷한 것으로 원본 파일을 대신하여 다른 이름으로 파일 명을 지정한 것이다.

   - 장치파일 : 리눅스에서는 키보드와 같은 장치도 파일로 취급한다.


      리눅스에서는 파일을 효율적으로 관리하기 위해 디렉터리를 계층적으로 사용한다.  -> tree 구조

   모든 디렉터리의 시작은 루트(/)

   루트 디렉터리를 제외하고는 모두 부모 디렉터리가 있다. 부모 디렉터리는 **..** 으로 표시한다.



   경로명은 파일 시스템에서 계층 구조에 있는 특정 파일이나 디렉터리의 위치를 표시한다.

   절대 경로와 상대 경로가 있는데 절대 경로는 루트부터 시작하는 것이고, 상대 경로는 현재 디렉터리를 기준으로 시작

   홈 디렉터리는 **~** 로 표시한다.



1. ###  디렉터리 사용 명령

   - pwd : 현재 디렉터리의 절대 경로 출력

   - cd 경로 : 현재 디렉터리 변경. 경로에는 절대 경로와 상대 경로 모두 사용 가능.

   - ls (옵션) 경로 : 디렉터리의 내용을 출력한다. 옵션과 경로 없이 사용하면 현재 디렉터리 내용 확인

     - -a : 숨김 파일 포함하여 모든 파일 목록 출력
     - -l : 파일의 상세 정보 출력
     - -F : 파일의 종류 표시 (* - 실행파일 , / - 디렉터리, @ - 심벌릭 링크)

   - mkdir 이름 : 디렉터리 만들기. 이름을 여러 개 지정하면 동시에 만들 수 있음.

2. ### 파일 다루기

   - cat (옵션) 파일명 : 파일 내용 출력
     - -n : 행 번호 같이 출력
   - cp (옵션) 파일1 파일 2 : 파일1을 파일2로 복사. 디렉터리도 가능
     - -r : 디렉터리 복사할 때 사용
   - rm (옵션) 파일 : 파일 삭제. 디렉터리도 가능
     - -r : 디렉터리 삭제할 때



## vi 문서 편집기

1. ### 동작 모드

   - **명령모드** : 입력한 키를 명령어로 해석. 커서 이동, 페이지 이동, 글자 삭제 등등

   - **입력모드** : 입력한 키를 내용으로 처리. 즉 문서 입력

   - **마지막 행 모드** : 종료하고 나가기, 검색 등 특별 명령 처리

2. ### 사용법

   - #### 시작하기

     - vi 문서이름 : 해당 파일이 존재하면 그 내용이 보이고 없으면 빈 파일이 열린다.

   - #### 종료하기

     *esc* 눌러서 명령모드나 마지막 행 모드에서 가능

     - :q : 작업한 것이 없을 때 그냥 종료

     - :q! : 작업한 내용을 저장하지 않고 종료

     - :w : 작업한 내용을 저장만 한다

     - :wq : 작업한 내용 저장하고 종료

   - #### 입력 모드로 전환하기

     - i : 커서 앞에 입력

     - a : 커서 뒤에 입력

     - o : 다음 행에 입력

     - I : 커서가 위치한 행의 첫 칼럼으로 이동하여 입력

     - A : 커서가 위치한 행의 마지막 칼럼으로 이동

     - O : 커서가 위치한 행의 앞 행에 입력

   - #### 명령행 모드에서 하는 여러가지 

     - r : 한 글자 수정

     - x : 한 글자 삭제
     - dw : 커서 위치의 단어 삭제
     - dd : 커서 위치한 행 삭제
     - yy : 커서가 위치한 행 복사
     - dd : 커서가 위치한 행 오려두기
     - p :  커서가 위치한 행 아래에 붙이기
     - P : 커서가 위치한 행 위에 붙이기
     - :%s /문자열1 /문자열2/g : 파일 전체 모든 문자열1을 문자열2로 바꾸기



## 셸(shell) 사용하기

셸의 기능은?

- 사용자와 커널 사이에서 명령을 해석하여 전달
- 셸 스크립트로 새로운 명령어 만들기
- 사용자 환경 설정 - 사용자 환경을 설정할 수 있도록 초기화 파일 기능을 제공



셸의 종류는 여러가지이다. 주로 bash 셸 사용



1. ### 셸 기본 사용법

   - #### 특수 문자 사용하기

     - *: 모든 파일  ex) ls *.txt 는 txt로 끝나는 모든 파일 보여주기

     - ? : 길이가 1인 임의의 문자  ex) ls t?.txt 는 t 다음에 임의의 한 글자가 오는 txt 파일 모두 보여주기

     - ~ : 홈 디렉터리

     - cd — : 이전 작업 디렉터리로 이동

     - '>' (원래는 따옴표 없는데 마크다운이라 주석으로 먹어요) : 파일 내용을 모두 삭제하고 실행 결과 저장 ex) ls -l > result  ls -l 의 실행결과를 result 파일에 저장

     - '>>' : 기존 파일의 내용 뒤에 덧붙이기 ex) ls ~ >> result 실행 결과를 result 파일에 덧붙이기

2. ### 배시 셸 환경 변수

   - HOME : 사용자의 홈 디렉터리 절대 경로

   - PATH : 명령을 탐색할 경로

   - SHELL :  로그인 셸

   - LOGNAME : 사용자 계정 이름

     출력할 때는 *echo $변수명*

3. ### 환경 설정 파일

   - 시스템 환경 설정 파일

     시스템을 사용하는 전체 사용자의 공통 환경을 설정하는 파일

     - /etc/profile

   - 환경 설정 파일

     사용자가 로그인할 때마다 자동으로 실행되는 명령을 저장한 것

     개인 설정

     - ~/.profile : 컴퓨터 시작할 때 자동으로 실행. 사용자가 정의하는 환경을 설정

     - ~/.bashrc : 터미널 창 띄울 때 마다 실행. 중간에 바꿔서 사용 가능. 즉 적용하기 전 터미널과 적용 후 터미널을 사용할 수 있다. 함수 등을 설정

       source .bashrc 를 통해 적용 가능



## 파일의 접근 권한 관리하기

리눅스는 파일에 무단으로 접근하는 것을 방지하고 보호하는 기능을 제공



1. ### 파일의 접근 권한 

   |   권한   |                          파일                          |             디렉터리              |
   | :------: | :----------------------------------------------------: | :-------------------------------: |
   | 읽기 (r) |                    읽거나 복사 가능                    |      디렉터리 내부 목록 보기      |
   | 쓰기 (w) | 수정, 이동, 삭제 가능 (디렉터리에 쓰기 권한 있을 때만) |          파일 생성, 삭제          |
   | 실행 (x) |              파일 실행 (실행파일일 경우)               | 파일을 디렉터리로 이동, 복사 가능 |

   - 접근 권한 표기 방법

     rwxrw-r- - : 3개씩 끊어서 본다. **소유자, 그룹, 기타 사용자**

     ex) r-xr-xr-x : 소유자, 그룹, 기타 사용자 모두 읽기와 실행 권한만 가지고 있다.

     ​      rwxr-xr— : 소유자는 모든 권한을 가지고 있고 그룹은 읽기, 실행 권한 기타 사용자는 읽기 권한만 가지고 있다.

2. ### 접근 권한 변경

   chmod (옵션) 파일/디렉터리 : 접근 권한 변경
   - -R : 하위 디렉터리 까지 모두 변경

   - ##### 기호모드

     |   구분   | 문자/기호 |             의미             |
     | :------: | :-------: | :--------------------------: |
     |  사용자  |     u     |         파일 소유자          |
     |          |     g     |      소유자가 속한 그룹      |
     |          |     o     | 소유자 그룹 외의 기타 사용자 |
     |          |     a     |         전체 사용자          |
     |  연산자  |     +     |          권한 부여           |
     |          |     -     |          권한 제거           |
     |          |     =     |          권한 설정           |
     | 접근권한 |     r     |          읽기 권한           |
     |          |     w     |          쓰기 권한           |
     |          |     x     |          실행 권한           |

     ex)

     ~~~cmd
     $ chmod g+w test.txt
     그룹에 쓰기 권한 추가
     
     $ chmod u+x, g=rx, o-r hi/test.txt
     소유자에 실행 권한 추가, 그룹 읽기와 실행 권한으로 설정, 기타 읽기 권한 삭제
     ~~~

   - ##### 숫자모드

     |      | 소유자 |      |      | 그룹 |      |      | 기타 |      |
     | :--- | :----- | ---- | :--: | :--: | :--: | ---: | ---: | ---: |
     | r    | w      | x    |  r   |  w   |  x   |    r |    w |    x |
     | 4    | 2      | 1    |  4   |  2   |  1   |    4 |    2 |    1 |

     ex) 

     ~~~cmd
     $ chmod 755 test.txt
     rwxr-xr-x와 같은 의미
     
     $ chmod 632 test.txt
     rw--wx-w-와 같은 의미
     ~~~

3. ### 기본 접근 권한

   마스크 값은 파일이나 디렉터리 생성 시 부여하지 않을 권한을 지정해 놓는 것.

   - umask (옵션) (마스크 값) : 기본 접근 권한을 출력하거나 변경

     - -S : 마스크 값을 문자로 출력 

       ex) umask 077 => 마스크 값을 077로 변경


   일반 파일의 최대 권한은 666, 디렉터리의 최대 권한은 777

   적용하는 방법은 최대 권한에서 마스크 값을 빼주면 됨



## 사용자 관리

리눅스는 다중 사용자 시스템이므로 사용자를 구별하고 적절한 지원을 할당해주는 방법이 필요

사용자 계정은 시스템에 접근할 수 있는 유일한 방법



- /etc/passwd 파일 : 사용자 계정 정보가 저장된 기본 파일

  한 행에 사용자 한 명에 대한 정보가 기록됨



1. ### 사용자 계정 관리

   - useradd 계정이름 : 사용자 계정 생정